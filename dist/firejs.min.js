"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),FireJS=function(){function e(){return _classCallCheck(this,e),this.datalist={},this.time=new Date,this.instance}return _createClass(e,[{key:"ready",value:function(e){e&&"function"==typeof e&&document.addEventListener("DOMContentLoaded",e)}},{key:"get",value:function(e){var t=document.querySelectorAll(e),n=new FireElements;switch(t.length){case 0:break;case 1:n.push(this["new"](t[0]));break;default:[].forEach.call(t,function(e){n.push(this["new"](e))},this)}return n}},{key:"new",value:function(e){if(!(e&&e instanceof HTMLElement))return null;var t=e;if(t.firejs_id&&this.datalist[t.firejs_id])return this.datalist[t.firejs_id];var n=new FireElement(e,this);return this.datalist[n.prop("firejs_id")]=n,n}},{key:"create",value:function(e){return this["new"](document.createElement(e))}},{key:"ajax",value:function(e,t){return new Promise(function(n,i){e.method=e.method?e.method.toUpperCase():"GET";var s=new XMLHttpRequest;s.open(e.method,e.url),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var u="";if(e.params&&"object"===_typeof(e.params)){var o=[];for(var r in e.params)o.push(r+"="+encodeURIComponent(e.params[r]));u=o.join("&")}s.onload=function(){var e=void 0;try{e=JSON.parse(s.response)}catch(i){throw"Server return wrong JSON response"}new Promise(function(n,i){"function"==typeof t&&t.call(s,e),n()}).then(function(){n(e)})},s.onerror=function(){return i(s.statusText)},s.send(u)})}}]),e}(),FireElements=function(){function e(){_classCallCheck(this,e),this.list=[]}return _createClass(e,[{key:"size",value:function(){return this.list.length}},{key:"push",value:function(e){return this.list.push(e),this}},{key:"each",value:function(e){return e&&"function"==typeof e&&this.list.forEach(function(t){e.call(t,t)}),this}},{key:"parent",value:function(){var t=new e;return this.each(function(e){e.parent()&&t.push(e.parent())}),t.size()>0?t:null}},{key:"children",value:function(){var t=new e;return this.each(function(e){e.children().each(function(){t.push(this)})}),t}},{key:"clone",value:function(){var t=new e;return this.each(function(){t.push(this.clone())}),t}},{key:"empty",value:function(){return this.each(function(){this.empty()}),this}},{key:"remove",value:function(){return this.each(function(){this.remove()}),null}},{key:"append",value:function(e){return this.each(function(t){e.each?e.each(function(e){t.append(e)}):t.append(e)}),this}},{key:"prepend",value:function(e){return this.each(function(t){e.each?e.each(function(e){t.prepend(e)}):t.prepend(e)}),this}},{key:"text",value:function(e){return this.each(function(t){t.text(e)}),this}},{key:"not",value:function(t){for(var n=this,i=new e,s=function(e){var s=n.eq(e);if(t.element)t.element!==s.element&&i.push(s);else{var u=!1;t.each(function(e){e.element===s.element&&(u=!0)}),u===!1&&i.push(s)}},u=0;u<this.size();u++)s(u);return i}},{key:"next",value:function(){var t=new e;return this.each(function(e){t.push(e.next())}),t}},{key:"prev",value:function(){var t=new e;return this.each(function(e){t.push(e.prev())}),t}},{key:"find",value:function(t){var n=new e;return this.each(function(e){e.find(t).each(function(e){n.push(e)})}),n}},{key:"trigger",value:function(e){return this.each(function(t){t.trigger(e)}),this}},{key:"on",value:function(e,t){return this.each(function(n){n.on(e,t)}),this}},{key:"hasClass",value:function(e){var t=!0;return this.each(function(n){t=t&&n.hasClass(e)}),t}},{key:"addClass",value:function(e){return this.each(function(t){t.addClass(e)}),this}},{key:"removeClass",value:function(e){return this.each(function(t){t.removeClass(e)}),this}},{key:"toggleClass",value:function(e){return this.each(function(t){t.toggleClass(e)}),this}},{key:"prop",value:function(e,t){return"undefined"!=typeof t?(this.each(function(n){n.prop(e,t)}),this):this.eq(0).prop(e)}},{key:"attr",value:function(e,t){return"undefined"!=typeof t?(this.each(function(n){n.attr(e,t)}),this):this.eq(0).attr(e)}},{key:"css",value:function(e,t){return"undefined"!=typeof t?(this.each(function(n){n.css(e,t)}),this):this.eq(0).css(e)}},{key:"width",value:function(e){return e&&this.each(function(t){t.width(e)}),this.eq(0).width()}},{key:"height",value:function(e){return e&&this.each(function(t){t.height(e)}),this.eq(0).height()}},{key:"offset",value:function(){return this.eq(0)?this.eq(0).offset():null}},{key:"show",value:function(){return this.each(function(e){e.show()}),this}},{key:"hide",value:function(){return this.each(function(e){e.hide()}),this}},{key:"toggle",value:function(){return this.each(function(e){e.toggle()}),this}},{key:"val",value:function(e){return"undefined"!=typeof e?(this.each(function(t){t.val(e)}),this):this.eq(0)?this.eq(0).val():null}},{key:"node",value:function(){var e=[];return this.each(function(t){e.push(t.node())}),1===e.length?e[0]:e}},{key:"html",value:function(e){return"undefined"!=typeof e?(this.each(function(t){t.html(e)}),this):this.eq(0)?this.eq(0).html():null}},{key:"eq",value:function(e){return 0>e&&(e=this.list.length+(e-1)),this.list[e]}},{key:"first",value:function(){return this.list[0]}},{key:"last",value:function(){return this.list[this.list.length-1]}}]),e}(),FireElement=function(){function e(t,n){_classCallCheck(this,e),this.element=t,this.firejs=n,this.display=document.defaultView.getComputedStyle(this.element,null).display.toLowerCase(),this.display_show=!0,"none"===this.display&&(this.display_show=!1),this.element.firejs_id=Date.now().toString()+"-"+Math.random().toString().substring(2,7)}return _createClass(e,[{key:"prop",value:function(e,t){return"undefined"!=typeof t?(null===t?this.node()[e]=null:this.node()[e]=t,this):this.node()[e]}},{key:"parent",value:function(){return this.firejs["new"](this.prop("parentNode"))}},{key:"children",value:function(){var e=new FireElements,t=this;return[].forEach.call(t.prop("children"),function(n){e.push(t.firejs["new"](n))}),e}},{key:"clone",value:function t(){var t=this.node().cloneNode(!0);return delete t.firejs_id,this.firejs["new"](t)}},{key:"empty",value:function(){for(var e=this.node();e.firstChild;)e.removeChild(e.firstChild);return this}},{key:"remove",value:function(){return this.node().remove(),null}},{key:"append",value:function(e){return this.node().appendChild(e.node()),this}},{key:"prepend",value:function(e){var t=this.children(),n=t.size()>0?t.eq(0).node():null;return this.node().insertBefore(e.node(),n),this}},{key:"text",value:function(e){return this.node().textContent=e,this}},{key:"next",value:function(){var e=this.prop("nextElementSibling");return e?this.firejs["new"](e):null}},{key:"prev",value:function(){var e=this.prop("previousElementSibling");return e?this.firejs["new"](e):null}},{key:"find",value:function(e){var t=new FireElements,n=this;return[].forEach.call(n.element.querySelectorAll(e),function(e){var i=n.firejs["new"](e);t.push(i)}),t}},{key:"trigger",value:function(e){if("function"==typeof this.prop(e))this.prop(e).call(this.node());else{var t=null;"undefined"!=typeof CustomEvent?t=new CustomEvent(e,{bubbles:!0,cancelable:!0}):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),this.node().dispatchEvent(t)}return this}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=this;this.node().addEventListener(e,function(e){t.call(n,e,n)===!1&&e.preventDefault()},!1)}return this}},{key:"attr",value:function(e,t){return"undefined"!=typeof t?(null===t?this.node().removeAttribute(e):this.node().setAttribute(e,t),this):this.node().getAttribute(e)}},{key:"get",value:function(e){return this.node().getAttribute(e)}},{key:"hasClass",value:function(e){return this.node().classList.contains(e)}},{key:"addClass",value:function(e){return e&&this.node().classList.add(e),this}},{key:"removeClass",value:function(e){return e&&this.node().classList.remove(e),this}},{key:"toggleClass",value:function(e){return e&&this.node().classList.toggle(e),this}},{key:"css",value:function(e,t){return"string"==typeof e?this.node().style[e]=t:"object"===("undefined"==typeof e?"undefined":_typeof(e))&&[].forEach.call(Object.keys(e),function(t){this.node().style[t]=e[t]},this),this}},{key:"width",value:function(e){return e&&(this.node().style.width=e+"px"),this.node().offsetWidth}},{key:"height",value:function(e){return e&&(this.node().style.height=e+"px"),this.node().offsetHeight}},{key:"offset",value:function(){var e=this.node().getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}},{key:"show",value:function(){return"none"===this.display?this.node().style.display="block":this.node().style.display="",this.display_show=!0,this}},{key:"hide",value:function(){return this.node().style.display="none",this.display_show=!1,this}},{key:"toggle",value:function(){return this.display_show?this.hide():this.show(),this}},{key:"val",value:function(e){return this.node().type&&"checkbox"===this.node().type.toLowerCase()?("undefined"!=typeof e&&(this.node().checked=e),this.node().checked):this.node().type&&"radio"===this.node().type.toLowerCase()?("undefined"!=typeof e&&(this.node().checked=this.node().value==e),this.node().value):"undefined"!=typeof this.node().value?("undefined"!=typeof e&&(this.node().value=e),this.node().value):null}},{key:"html",value:function(e){return"undefined"!=typeof e&&(this.node().innerHTML=e),this.node().innerHTML}},{key:"node",value:function(){return this.element}}]),e}(),fire=new FireJS;