"use strict";function _createForOfIteratorHelper(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=_unsupportedIterableToArray(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var FireJS=function(){function e(){return _classCallCheck(this,e),this.datalist={},this.__ready=!1,this.time=new Date,this.instance}return _createClass(e,[{key:"ready",value:function(e){var t=this;e&&"function"==typeof e&&(this.__ready?e():document.addEventListener("DOMContentLoaded",function(){t.__ready=!0,e()}))}},{key:"get",value:function(e){var t=document.querySelectorAll(e),n=new FireElements;switch(t.length){case 0:break;case 1:n.push(this.new(t[0]));break;default:[].forEach.call(t,function(e){n.push(this.new(e))},this)}return n}},{key:"new",value:function(e){if(!(e&&e instanceof HTMLElement))return null;if(e.firejs_id&&this.datalist[e.firejs_id])return this.datalist[e.firejs_id];var t=new FireElement(e,this);return this.datalist[t.prop("firejs_id")]=t}},{key:"create",value:function(e){return this.new(document.createElement(e))}},{key:"ajax",value:function(s,u){return new Promise(function(e,t){s.method=s.method?s.method.toUpperCase():"GET";var i=new XMLHttpRequest;i.open(s.method,s.url),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var n="";if(s.params&&"object"===_typeof(s.params)){var r=[];for(var o in s.params){switch(s.params[o]){case!0:s.params[o]="1";break;case!1:s.params[o]="0";break;case null:case void 0:case NaN:s.params[o]=""}r.push(o+"="+encodeURIComponent(s.params[o]))}n=r.join("&")}i.onload=function(){var n;try{n=JSON.parse(i.response)}catch(e){n={error:"Server return wrong JSON response"}}new Promise(function(e,t){"function"==typeof u&&u.call(i,n),e()}).then(function(){e(n)})},i.onerror=function(){return t(i.statusText)},i.send(n)})}},{key:"watch",value:function(e,t,r){"function"==typeof t&&(r=t,t=Object.keys(e)),"object"!==_typeof(t)&&(t=[t]);var o,n=_createForOfIteratorHelper(t);try{var i=function(){var n=o.value,i=e[n];Object.defineProperty(e,n,{get:function(){return i},set:function(e){var t=i;i=e,r(t,n)}})};for(n.s();!(o=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}}}]),e}(),FireElements=function(){function s(){_classCallCheck(this,s),this.list=[]}return _createClass(s,[{key:"size",value:function(){return this.list.length}},{key:"push",value:function(e){return this.list.push(e),this}},{key:"each",value:function(t){return t&&"function"==typeof t&&this.list.forEach(function(e){t.call(e,e)}),this}},{key:"parent",value:function(){var t=new s;return this.each(function(e){e.parent()&&t.push(e.parent())}),0<t.size()?t:null}},{key:"parents",value:function(t){var n=new s;return this.each(function(e){e.parents(t).each(function(e){n.push(e)})}),n}},{key:"children",value:function(){var t=new s;return this.each(function(e){e.children().each(function(){t.push(this)})}),t}},{key:"clone",value:function(e){var t=new s;return this.each(function(){t.push(this.clone(e))}),t}},{key:"empty",value:function(){return this.each(function(){this.empty()}),this}},{key:"remove",value:function(){return this.each(function(){this.remove()}),null}},{key:"append",value:function(e){return this.each(function(t){e.each?e.each(function(e){t.append(e)}):t.append(e)}),this}},{key:"prepend",value:function(e){return this.each(function(t){e.each?e.each(function(e){t.prepend(e)}):t.prepend(e)}),this}},{key:"text",value:function(t){return void 0!==t?(this.each(function(e){e.text(t)}),this):this.eq(0).text()}},{key:"not",value:function(i){for(var r=this,o=new s,e=function(e){var t,n=r.eq(e);i.node()?i.node()!==n.node()&&o.push(n):(t=!1,i.each(function(e){e.node()===n.node()&&(t=!0)}),!1===t&&o.push(n))},t=0;t<this.size();t++)e(t);return o}},{key:"next",value:function(){var t=new s;return this.each(function(e){t.push(e.next())}),t}},{key:"prev",value:function(){var t=new s;return this.each(function(e){t.push(e.prev())}),t}},{key:"find",value:function(t){var n=new s;return this.each(function(e){e.find(t).each(function(e){n.push(e)})}),n}},{key:"trigger",value:function(t){return this.each(function(e){e.trigger(t)}),this}},{key:"on",value:function(t,n){return this.each(function(e){e.on(t,n)}),this}},{key:"off",value:function(t){return this.each(function(e){e.off(t)}),this}},{key:"events",value:function(){return this.eq(0).events()}},{key:"hasClass",value:function(t){var n=!0;return this.each(function(e){n=n&&e.hasClass(t)}),n}},{key:"addClass",value:function(t){return this.each(function(e){e.addClass(t)}),this}},{key:"removeClass",value:function(t){return this.each(function(e){e.removeClass(t)}),this}},{key:"toggleClass",value:function(t){return this.each(function(e){e.toggleClass(t)}),this}},{key:"prop",value:function(t,n){return void 0!==n?(this.each(function(e){e.prop(t,n)}),this):this.eq(0).prop(t)}},{key:"attr",value:function(t,n){return void 0!==n?(this.each(function(e){e.attr(t,n)}),this):this.eq(0).attr(t)}},{key:"css",value:function(t,n){return void 0!==n?(this.each(function(e){e.css(t,n)}),this):this.eq(0).css(t)}},{key:"width",value:function(t){return t&&this.each(function(e){e.width(t)}),this.eq(0).width()}},{key:"height",value:function(t){return t&&this.each(function(e){e.height(t)}),this.eq(0).height()}},{key:"offset",value:function(){return this.eq(0)?this.eq(0).offset():null}},{key:"show",value:function(){return this.each(function(e){e.show()}),this}},{key:"hide",value:function(){return this.each(function(e){e.hide()}),this}},{key:"toggle",value:function(){return this.each(function(e){e.toggle()}),this}},{key:"val",value:function(t){return void 0!==t?(this.each(function(e){e.val(t)}),this):this.eq(0)?this.eq(0).val():null}},{key:"node",value:function(){var t=[];return this.each(function(e){t.push(e.node())}),1===t.length?t[0]:t}},{key:"html",value:function(t){return void 0!==t?(this.each(function(e){e.html(t)}),this):this.eq(0)?this.eq(0).html():null}},{key:"eq",value:function(e){return e<0&&(e=this.list.length+(e-1)),this.list[e]}},{key:"first",value:function(){return this.list[0]}},{key:"last",value:function(){return this.list[this.list.length-1]}}]),s}(),FireElement=function(){function n(e,t){_classCallCheck(this,n),this.__element=e,this.__handlers={},this.__firejs=t,this.__display=document.defaultView.getComputedStyle(this.node(),null).display.toLowerCase(),this.__display_show=!0,"none"===this.__display&&(this.__display_show=!1),this.node().firejs_id=Date.now().toString()+"-"+Math.random().toString().substring(2,7)}return _createClass(n,[{key:"prop",value:function(e,t){return void 0!==t?(this.node()[e]=null===t?null:t,this):this.node()[e]}},{key:"parent",value:function(){return this.__firejs.new(this.prop("parentNode"))}},{key:"parents",value:function(e){for(var t=new FireElements,n=void 0!==e,i=this;i.prop("parentElement");){var r=(i=i.__firejs.new(i.prop("parentNode"))).node();(!1==n||r.matches&&r.matches(e)||r.msMatchesSelector&&r.msMatchesSelector(e))&&t.push(i)}return t}},{key:"children",value:function(){var t=new FireElements,n=this;return[].forEach.call(n.prop("children"),function(e){t.push(n.__firejs.new(e))}),t}},{key:"clone",value:function(e){var t=this.__firejs.new(this.node().cloneNode(!0));if(e){var n=this.events();for(var i in n){var r,o=_createForOfIteratorHelper(n[i]);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.on(i,s)}}catch(e){o.e(e)}finally{o.f()}}}return t}},{key:"empty",value:function(){for(var e=this.node();e.firstChild;)e.removeChild(e.firstChild);return this}},{key:"remove",value:function(){return this.node().remove(),null}},{key:"append",value:function(e){return this.node().appendChild(e.clone(!0).node()),this}},{key:"prepend",value:function(e){var t=this.children(),n=0<t.size()?t.eq(0).node():null;return this.node().insertBefore(e.node(),n),this}},{key:"text",value:function(e){return void 0!==e?(this.node().textContent=e,this):this.node().textContent}},{key:"next",value:function(){var e=this.prop("nextElementSibling");return e?this.__firejs.new(e):null}},{key:"prev",value:function(){var e=this.prop("previousElementSibling");return e?this.__firejs.new(e):null}},{key:"find",value:function(e){var n=new FireElements,i=this;return[].forEach.call(i.node().querySelectorAll(e),function(e){var t=i.__firejs.new(e);n.push(t)}),n}},{key:"trigger",value:function(e){var t;return"function"==typeof this.prop(e)?this.prop(e).call(this.node()):(t=null,"undefined"!=typeof CustomEvent?t=new CustomEvent(e,{bubbles:!0,cancelable:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!0),this.node().dispatchEvent(t)),this}},{key:"on",value:function(e,t){var n,i,r=this;return t&&"function"==typeof t&&(n=this,i=function(e){!1===t.call(n,e,n)&&e.preventDefault()},e.split(/\s+/).forEach(function(e){r.node().addEventListener(e,i,!1),r.__handlers[e]=r.__handlers[e]||[],r.__handlers[e].push(i)})),this}},{key:"off",value:function(e){if(this.__handlers[e])for(var t=0;t<this.__handlers[e].length;t++)this.node().removeEventListener(e,this.__handlers[e][t],!1),this.__handlers[e].splice(t--,1);return this}},{key:"events",value:function(e){return void 0===e?this.__handlers:e in this.__handlers?this.__handlers[e]:[]}},{key:"attr",value:function(e,t){return void 0!==t?(null===t?this.node().removeAttribute(e):this.node().setAttribute(e,t),this):this.node().getAttribute(e)}},{key:"get",value:function(e){return this.node().getAttribute(e)}},{key:"hasClass",value:function(e){return this.node().classList.contains(e)}},{key:"addClass",value:function(e){return e&&this.node().classList.add(e),this}},{key:"removeClass",value:function(e){return e&&this.node().classList.remove(e),this}},{key:"toggleClass",value:function(e){return e&&this.node().classList.toggle(e),this}},{key:"css",value:function(t,e){return"string"==typeof t?this.node().style[t]=e:"object"===_typeof(t)&&[].forEach.call(Object.keys(t),function(e){this.node().style[e]=t[e]},this),this}},{key:"width",value:function(e){return e&&(this.node().style.width=e+"px"),this.node().offsetWidth}},{key:"height",value:function(e){return e&&(this.node().style.height=e+"px"),this.node().offsetHeight}},{key:"offset",value:function(){var e=this.node().getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}},{key:"show",value:function(){return"none"===this.__display?this.node().style.display="block":this.node().style.display="",this.__display_show=!0,this}},{key:"hide",value:function(){return this.node().style.display="none",this.__display_show=!1,this}},{key:"toggle",value:function(){return this.__display_show?this.hide():this.show(),this}},{key:"val",value:function(e){return this.node().type&&"checkbox"===this.node().type.toLowerCase()?(void 0!==e&&(this.node().checked=e),this.node().checked):this.node().type&&"radio"===this.node().type.toLowerCase()?(void 0!==e&&(this.node().checked=this.node().value==e),this.node().value):void 0!==this.node().value?(void 0!==e&&(this.node().value=e),this.node().value):null}},{key:"html",value:function(e){return void 0!==e&&(this.node().innerHTML=e),this.node().innerHTML}},{key:"node",value:function(){return this.__element}}]),n}(),fire=new FireJS;